1b
<%= form_tag("", method: "post") do %>
	<%= label_tag(:parent, "Replying to:") %>
	<%= number_field_tag(:parent, @reply_to) %>
	<%= label_tag(:msg, "Message:") %>
	<%= text_field_tag(:msg) %>
	<%= submit_tag("post") %>
<% end %>

<% def display_thread(parent=nil) %>
	<%= content_tag(:div, class: "post") do %>
		<%= parent&.created_at&.strftime("%d/%m/%Y %H:%M") %><br/>
		<%= parent&.message %><br/>
		<% Post.where(parent: parent).each do |post| %>
			<% display_thread(post) %><br/>
		<% end %>
	<% end %>
<% end %>
<% display_thread() %>
