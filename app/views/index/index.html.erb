<%= stylesheet_link_tag "style" %>


<%= content_tag(:div, class: "banner") do%>
	<%= content_tag(:h1) do%>
		1b
	<% end %>
	<%= content_tag(:h2) do%>
		Funposting for the serverely mentally disturbed
	<% end %>
<% end %>

<%= content_tag(:div, class: "post_form") do %>
	<%= form_tag("", method: "post") do %>
		<%= hidden_field_tag(:parent, @reply_to) %>
		<br/>
		<%= label_tag(:msg, "Message:") %><br/>
		<%= text_area_tag(:msg) %><br/>
		<%= submit_tag("post") %>
	<% end %>
<% end %>

<% def display_thread(parent=nil) %>
	<%= content_tag(:div, class: "post") do %>
		<%= content_tag(:a, "Reply", href: parent&.id.to_s, id: "reply-"+parent&.id.to_s)%> 
		<%= parent&.created_at&.strftime("%d/%m/%Y %H:%M") %><br/>
		<%= content_tag(:p, parent&.message, class: "post_content") %>
		<% Post.where(parent: parent).each do |post| %>
			<% display_thread(post) %><br/>
		<% end %>
	<% end %>
<% end %>
<% display_thread() %>
